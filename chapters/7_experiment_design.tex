\documentclass[../main]{subfiles}
\begin{document}
% Because we use sections but these sections should be interpreted as chapters for rq1 and rq2 sectioning.
\clearpage
\chapter{Experiment design}
In this chapter we design an experiment to validate our research.
We hypothesise that we can cluster mutants with the set of characteristics we identified
while maintaining effectiveness and reducing the amount executed when executing one mutant from each cluster that is randomly selected.
Our goal is to achieve a weighted mutation score that is as close as possible to the mutation score of a full set of executed mutants.

\section{Project selection}
\label{ch:project_selection}
We choose three main requirements for selecting software projects; the projects should have a test suite, the test suite should not contain failing tests and the mutation testing tool should be able to execute mutants for the sample project.
We selected projects that were also used in other research within the mutation testing and testing domain\cite{Pizzoleto2019,Yu2019PossibilityScope,Wei2021SpectralTesting, Zhang2019PredictiveTesting, Chen2018SpeedingStudy, Laurent2017AssessingPIT}.
\newline
We extend our sample by selecting projects from the first six pages of the most popular Java projects on GitHub\footnote{\url{https://github.com/search?p=7&q=language\%3Ajava+stars\%3A\%3E10000&type=Repositories}}.
The unfiltered sample contains 50+ projects.
From there we filter out all the projects that contain failing tests and that are not libraries or applications.
The result consists of a sample with fifteen projects in total.

\section{Baseline measurement}
The baseline for our experiment is the mutation score of the set of all mutants generated by the selected mutation testing tool.
To extract this score we need to execute a full set of mutants within PIT.
For each source we have added the PIT plugin and required configuration in the \textit{pom.xml}, this code instructs PIT to generate and execute mutants with all mutators available, an example of such code can be found in Appendix \ref{ap:PIT_maven_code}.
We can then use the \acrfull{cli} and a maven command(see Listing \ref{lst:mvn-full}) to execute PIT.
\begin{lstlisting}[label=lst:mvn-full,caption=Command used to execute full set of mutants with PIT.]
mvn -U org.pitest:pitest-maven:mutationCoverage
\end{lstlisting}

\section{Validation}
\label{ch:exp1_validation}
The most efficient way to measure test effectiveness with mutation testing is by executing all mutants that a mutation testing tool can possibly generate.
The goal of this experiment is to reduce the amount of mutants executed while maintaining effectiveness.
To reduce the amounts executed we cluster the mutants. 
We can measure this by counting the number of clusters we generate and compare it to the number of total mutants generated by the selected tool.
\newline
To validate how effective our method of clustering is we can compare the weighted mutation score(see Chapter \ref{ch:weighted_score}) of the clustered set to the mutation score of the full set.
The closer the weighted score is to that of a full set the more effective our set of characteristics and clustering algorithm proves to be.
In other words we want achieve a mutation score that is as close as possible as to that of a full set.
We select a statistical significance level of $\leq 0.05$.
This is the conventional threshold for declaring statistical significance\cite{Kirk1996PracticalCome}.
\newline
Depending on the effectiveness of our clustering algorithm we may loose accuracy.
This can happen if a cluster contains mutants of both results. 
We can measure the accuracy inside a cluster by calculating a percentage of all mutants that have survived against the ones that have been killed in a cluster.
If the majority of the mutants in a cluster is killed then we consider that cluster to represent a killed cluster and the other way around for survived mutants.
We consider the mutants that are not in the majority of the cluster as inaccuracy.
\newline
If the weighted mutation score of our clustered set deviates more than 5\% from the score of a full set we will reject our hypothesis.

\section{Random mutant selection}
\label{ch:mutant_selection}
As stated in our hypothesis we randomly select a mutant from each cluster to be executed.
To validate our sample we make use of statistical hypothesis testing\cite{Emmert-Streib2019UnderstandingInference}. 
Our null hypothesis states that there is no relation between the characteristics identified and the results of a mutant.
To test this hypothesis we select an alpha value of 0.05.
To translate; if more than five percent of the values in a sample deviates more than the significance level(see Chapter \ref{ch:exp1_validation}) we cannot reject the null hypothesis.
To make our results reproducible we will select the random mutant based on a generated seed.
The seed generated for each run will be included in the results and can be found in the Github repository\cite{rbasarat-repo}.
We will repeat our experiment 30 times with 30 different seeds.
Achieving consistent results while applying random selection will contribute to the validity of the experiment.


\end{document}